<html>

<div class="uploader glass center" *ngIf="trans.length == 0" (dragover)="onDragOver($event)" (drop)="onDropSuccess($event)">
    <h1>Select your .CSGOANALYZER dump</h1>
    <input type="file" id="file-upload" accept=".CSGOANALYZER" (change)="fileSelected($event)" />
    <label for="file-upload" id="file-drag">
      <div id="start">
        <fa-icon [icon]="faUpload" aria-hidden="true"></fa-icon>
        <div>Select a file or drag here</div>
        <span id="file-upload-btn" class="btn btn-primary">Select a file</span>
      </div>
    </label>
</div>
<mat-grid-list cols="2" rowHeight="2:1" *ngIf="trans.length != 0">
    <mat-grid-tile>
        <mat-card class="glass col">
            <mat-card-title>Summary</mat-card-title>
            <mat-card-content>
                <p>Total Transactions: {{trans.length}}</p>
                <p>Latest Transaction: {{this.trans[0].date}}</p>
                <p>Oldest Transaction: {{this.trans[this.trans.length-1].date}}</p>
            </mat-card-content>
        </mat-card>
    </mat-grid-tile>
    <mat-grid-tile>
        <mat-card class="glass col">
            <mat-card-title>Case Analyzer</mat-card-title>
            <mat-card-content>
                <p>Total Containers Opened: {{containers.length}}</p>
                <p>Total Stickers Opened: {{containers.length - cases['all'].length}}</p>
                <p>Total Cases Opened: {{cases['all'].length}}</p>
                <p>Golds: {{cases['golds'].length}}</p>
                <p>Reds: {{cases['reds'].length}}</p>
                <p>Pinks: {{cases['pinks'].length}}</p>
                <p>Purples: {{cases['purples'].length}}</p>
                <p>Blues: {{cases['blues'].length}}</p>
                <p>Light Blues: {{cases['lightBlues'].length}}</p>
            </mat-card-content>
        </mat-card>
    </mat-grid-tile>
</mat-grid-list>


<ng-template #content let-offcanvas>
    <div class="offcanvas-header">
        <h4 class="offcanvas-title" id="offcanvas-basic-title">All Transactions</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="offcanvas.dismiss('Cross click')"></button>
    </div>
    <div class="offcanvas-body">
        <cdk-virtual-scroll-viewport itemSize="50">
            <div *cdkVirtualFor="let tran of trans">
                <p>{{tran.date}} {{tran.time}}</p>
                <p>{{tran.action}}</p>
                <div class="row">
                    <div class="col-md-6">
                        <div class="gained" *ngFor="let item of tran.given">
                            <h4 [style.color]="'#' + item.nameColor">{{item.name}}</h4>
                            <img [src]="formatIcon(item.iconUrl)" class="item-img">
                            <p>{{item.type}}</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="lost" *ngFor="let item of tran.taken">
                            <h4 [style.color]="'#' + item.nameColor">{{item.name}}</h4>
                            <img [src]="formatIcon(item.iconUrl)" class="item-img">
                            <p>{{item.type}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </cdk-virtual-scroll-viewport>
    </div>
</ng-template>


<button class="fixed-bottom" (click)="open(content)">Open all</button>

</html>